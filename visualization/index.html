<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Visualization · FLOWUnsteady</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-B7CBF7WC7L"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-B7CBF7WC7L', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="FLOWUnsteady logo"/></a><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Intro</a></li><li><a class="tocitem" href="../installation/general/">Installation</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Simple Wing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/wing-4p2aoa/">Basics</a></li><li><a class="tocitem" href="../examples/wing-aoasweep/">AOA Sweep</a></li></ul></li><li><a class="tocitem" href="../examples/tetheredwing/">Tethered Wing</a></li><li><a class="tocitem" href="../examples/heavingwing/">Heaving Wing</a></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Propeller</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/propeller-J040/">Basics</a></li><li><a class="tocitem" href="../examples/propeller-jsweep/"><span>$J$</span> Sweep</a></li><li><a class="tocitem" href="../examples/propeller-quasisteady/">Quasi-Steady Solver</a></li><li><a class="tocitem" href="../examples/propeller-incidence/">Incidence Sweep</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Rotor in Hover</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/rotorhover-aero/">Variable Fidelity</a></li><li><a class="tocitem" href="../examples/rotorhover-fdom/">Fluid Domain</a></li><li><a class="tocitem" href="../examples/rotorhover-acoustics/">Aeroacoustics</a></li><li><a class="tocitem" href="../examples/rotorhover-quasisteady/">Quasi-Steady Solver</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-6" type="checkbox"/><label class="tocitem" for="menuitem-4-6"><span class="docs-label">Blown Wing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/blownwing-aero/">Aerodynamic Solution</a></li><li><a class="tocitem" href="../examples/blownwing-asm/">Actuator Surface Model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-7" type="checkbox"/><label class="tocitem" for="menuitem-4-7"><span class="docs-label">eVTOL Aircraft</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/vahana-vehicle/">Vehicle Definition</a></li><li><a class="tocitem" href="../examples/vahana-maneuver/">Maneuver Definition</a></li><li><a class="tocitem" href="../examples/vahana-monitor/">Monitors Definitions</a></li><li><a class="tocitem" href="../examples/vahana-run/">Run Simulation</a></li></ul></li></ul></li><li class="is-active"><a class="tocitem" href>Visualization</a><ul class="internal"><li><a class="tocitem" href="#What-*NOT*-to-do"><span>What <em>NOT</em> to do</span></a></li><li><a class="tocitem" href="#What-we-recommend"><span>What we recommend</span></a></li><li><a class="tocitem" href="#Fluid-domain"><span>Fluid domain</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Theory</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../theory/rvpm/">Reformulated VPM</a></li><li><a class="tocitem" href="../theory/convergence/">Convergence</a></li><li><a class="tocitem" href="../theory/validation/">Validation</a></li><li><a class="tocitem" href="../theory/publications/">Publications</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">API Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-7-1" type="checkbox"/><label class="tocitem" for="menuitem-7-1"><span class="docs-label">(1) Vehicle Definition</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../api/flowunsteady-vehicle-types/">Vehicle types</a></li><li><a class="tocitem" href="../api/flowunsteady-vehicle-components/">Generating components</a></li><li><a class="tocitem" href="../api/flowunsteady-vehicle-asm/">Actuator surface model</a></li></ul></li><li><a class="tocitem" href="../api/flowunsteady-maneuver/">(2) Maneuver Definition</a></li><li><a class="tocitem" href="../api/flowunsteady-simulation/">(3) Simulation Definition</a></li><li><a class="tocitem" href="../api/flowunsteady-monitor/">(4) Monitors Definitions</a></li><li><a class="tocitem" href="../api/flowunsteady-run/">(5) Run Simulation</a></li><li><input class="collapse-toggle" id="menuitem-7-6" type="checkbox"/><label class="tocitem" for="menuitem-7-6"><span class="docs-label">(6) Viz and Postprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../api/flowunsteady-postprocessing-fdom/">Fluid Domain</a></li><li><a class="tocitem" href="../api/flowunsteady-postprocessing-noise/">Aeroacoustic Noise</a></li><li><a class="tocitem" href="../api/flowunsteady-postprocessing-misc/">Miscellaneous</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7-7" type="checkbox"/><label class="tocitem" for="menuitem-7-7"><span class="docs-label">Extras</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-7-7-1" type="checkbox"/><label class="tocitem" for="menuitem-7-7-1"><span class="docs-label">FLOWVPM</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../api/flowvpm-particle/">Particle Field</a></li><li><a class="tocitem" href="../api/flowvpm-uj/">UJ Scheme</a></li><li><a class="tocitem" href="../api/flowvpm-viscous/">Viscous Scheme</a></li><li><a class="tocitem" href="../api/flowvpm-relaxation/">Relaxation Scheme</a></li><li><a class="tocitem" href="../api/flowvpm-sfs/">SFS Scheme</a></li><li><a class="tocitem" href="../api/flowvpm-time/">Time Integration</a></li><li><a class="tocitem" href="../api/flowvpm-utils/">Utilities</a></li></ul></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Visualization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Visualization</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/FLOWUnsteady/blob/master/docs/src/visualization.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Visualization-Guide"><a class="docs-heading-anchor" href="#Visualization-Guide">Visualization Guide</a><a id="Visualization-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization-Guide" title="Permalink"></a></h1><h2 id="What-*NOT*-to-do"><a class="docs-heading-anchor" href="#What-*NOT*-to-do">What <em>NOT</em> to do</a><a id="What-*NOT*-to-do-1"></a><a class="docs-heading-anchor-permalink" href="#What-*NOT*-to-do" title="Permalink"></a></h2><p>Unfortunately, the first thing that ParaView shows when you open a particle field is a &quot;scatter plot&quot; full of confusing colors like this:</p><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/dji9443-low-rainbow00-bad00.jpg"
    alt="Pic here" style="width: 75%;"/>
</center><p>Not surprisingly, the VPM literature is full of these visualizations, which provide very little information about the simulation. <a href="https://www.nature.com/articles/s41467-020-19160-7">Poor colormap aside</a>, why is this a bad visualization? Even though we are coloring the strengths of the particles, one must remember that the particle strength <span>$\boldsymbol\Gamma$</span> is the integral of the vorticity over the volume that is discretized by the particle, <span>$\boldsymbol\Gamma = \int\limits_{\mathrm{Vol}} \boldsymbol\omega \mathrm{d}V$</span>. This is equivalent to the average vorticity times the volume, <span>$\boldsymbol\Gamma = \overline{\boldsymbol\omega} \mathrm{Vol}$</span>, which means that the particle strength is proportional to the volume that it discretizes. Thus, the particle strength has no physical significance, but is purely a numerical artifact. <em>(In fact, <span>$\boldsymbol\Gamma$</span> are nothing more than the coefficients of the radial basis function that reconstructs the vorticity field as <span>$\overline{\boldsymbol\omega}\left( \mathbf{x}\right) \approx \sum\limits_p \boldsymbol{\Gamma}_p \zeta_{\sigma_p}(\mathbf{x}-\mathbf{x}_p)$</span>.)</em></p><p>Another VPM visualization that is commonly found in the literature simply shows the position of the particles:</p><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/dji9443-low-dots00-bad00.jpg"
    alt="Pic here" style="width: 75%;"/>
</center><p>Why is this a bad visualization? Even though its intent is to depict the flow field by taking advantage of the fact that particles follow streamlines and vortical structures, what is actually visualized is the spatial discretization. After all, we are just looking at the position of the computational elements. Here is an equivalent visualization of the computational elements in a mesh-based simulation of the same rotor in hover:</p><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/visualization-mesh00.png"
    alt="Pic here" style="width: 40%;"/>
</center><p>Not very insightful, is it?</p><h2 id="What-we-recommend"><a class="docs-heading-anchor" href="#What-we-recommend">What we recommend</a><a id="What-we-recommend-1"></a><a class="docs-heading-anchor-permalink" href="#What-we-recommend" title="Permalink"></a></h2><p>In order to correctly visualize the flow field that is predicted by the VPM solver, one must reconstruct the vorticity field using the particles as a radial basis function and compute the velocity field using the Biot-Savart law. This can be computationally intensive and is not a streamlined process.</p><p>Alternatively, a quick visualization that sheds insights into both the flow field and the discretization is to make glyphs that point in the direction of <span>$\boldsymbol\Gamma$</span> (arrows scaled by magnitude), thus forming the vortex lines:</p><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/dji9443-low-glyph02.jpg"
    alt="Pic here" style="width: 100%;"/>
</center><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/dji9443-low-glyph01.jpg"
    alt="Pic here" style="width: 75%;"/>
</center><p>This type of visualization has four advantages:</p><ul><li>It clearly <strong>reveals the vortical structure</strong> (vortex lines) in a quick glimpse</li><li>One can <strong>envision the velocity field</strong> around the vortex lines using the right hand rule (Biot-Savart law shown below)</li><li>Adding small points at the position of each particle gives us an idea of the <strong>spatial resolution around vortices</strong></li><li>One can easily spot if the simulation is becoming numerically unstable since <strong>blown-up particles become giant arrows</strong></li></ul><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/visualization-particle01.png"
    alt="Pic here" style="width: 80%;"/>
</center><div class="admonition is-info"><header class="admonition-header">Glyph Visualization</header><div class="admonition-body"><p>A <code>.pvsm</code> file with a glyph visualization of the particle field is available here: <a href="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/singlerotor-monitors-particles11.pvsm">LINK</a> (<code>right click → save as...</code>).</p><p>To open in ParaView: <code>File → Load State → (select .pvsm file)</code> then select &quot;Search files under specified directory&quot; and point it to the folder where the simulation was saved.</p></div></div><h2 id="Fluid-domain"><a class="docs-heading-anchor" href="#Fluid-domain">Fluid domain</a><a id="Fluid-domain-1"></a><a class="docs-heading-anchor-permalink" href="#Fluid-domain" title="Permalink"></a></h2><p>While the &quot;glyph&quot; visualization shown above uses the native variables that are computed and outputted by the VPM (<span>$\boldsymbol\Gamma_p$</span> and <span>$\mathbf{x}_p$</span>), the full fluid domain can be computed from the particle field in postprocessing. This is done using the particles as <a href="../theory/rvpm/#particlediscretization">a radial basis function</a> to construct a continuous and analytical vorticity field <span>$\boldsymbol\omega(\mathbf{x})$</span>, and the Biot-Savart law is used to obtain a continuous and analytical velocity field <span>$\mathbf{u}(\mathbf{x})$</span>. Since <span>$\boldsymbol\omega(\mathbf{x})$</span> and <span>$\mathbf{u}(\mathbf{x})$</span> are analytical functions, their values and their derivatives can be calculated anywhere in space.</p><p>FLOWUnsteady provides the function <a href="../api/flowunsteady-postprocessing-fdom/#FLOWUnsteady.computefluiddomain"><code>uns.computefluiddomain</code></a> that reads a simulation and processes it to generate its fluid domain. See the <a href="../examples/rotorhover-fdom/#rotorfdom">Rotor in Hover tutorial</a> for an example on how to use <a href="../api/flowunsteady-postprocessing-fdom/#FLOWUnsteady.computefluiddomain"><code>uns.computefluiddomain</code></a>.</p><p>Whenever reporting results, we recommend showing the vortex elements (glyph visualization) and the fluid domain side by side to give a clear idea of the spatial resolution and the resulting flow field (see example below), which is custom in conventional mesh-based CFD.</p><center>
  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/visualization-highfidelity00.png"
    alt="Pic here" style="width: 100%;"/>
</center>  <img src="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/visualization-meshbased00.png"
      alt="Pic here" style="width: 85%;"/><br><br><p>Here is an example of a simulation superimposing the particle field and the resulting fluid domain:</p><div style="position:relative;padding-top:50%;">
    <iframe style="position:absolute;left:0;top:0;height:80%;width:72%;"
        src="https://www.youtube.com/embed/Bf4pIt7oi5k?hd=1"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
</div><div class="admonition is-info"><header class="admonition-header">Volume Rendering</header><div class="admonition-body"><p>A <code>.pvsm</code> file with a volume rendering of the vorticity field is   available here:   <a href="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/dji9443-fdom03.pvsm">LINK</a>   (<code>right click → save as...</code>).</p><p>To open in ParaView: <code>File → Load State → (select .pvsm file)</code> then   select &quot;Search files under specified directory&quot; and point it to the   folder where the simulation was saved.</p></div></div><div class="admonition is-success"><header class="admonition-header">Practice Dataset and Template</header><div class="admonition-body"><p>To help you practice in ParaView, we have uploaded the particle field   and fluid domain of <a href="../examples/rotorhover-aero/#rotorhoveraero">the DJI 9443 rotor case</a> of   mid-high fidelity and high fidelity simulations:</p><ul><li>High fidelity: <a href="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/rotorhover-highfidelity-particlefdom.zip">LINK</a></li><li>Mid-high fidelity: <a href="https://edoalvar2.groups.et.byu.net/public/FLOWUnsteady/rotorhover-midhighfidelity-particlefdom.zip">LINK</a></li></ul><p>We have also added a <code>.pvsm</code> ParaView state file that you can use as a   template for visualizing your particle field with glyphs and processing the   fluid domain.   To open in ParaView: <code>File → Load State → (select .pvsm file)</code> then   select &quot;Search files under specified directory&quot; and point it to the   folder with your simulation results.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/vahana-run/">« Run Simulation</a><a class="docs-footer-nextpage" href="../theory/rvpm/">Reformulated VPM »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 18 July 2023 23:11">Tuesday 18 July 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
